<script type=text/ng-template id=assets/views/modals/account-settings.html><md-dialog class="md-modal md-modal-wide account-settings-modal"> <div class="md-modal-header"> <div class="md-modal-avatar"> <img class="img-responsive" ng-src="{{ users.getAvatar() }}"/> </div> <div class="name">{{ users.current.first_name }} {{ users.current.last_name }}</div> <div class="email">{{:: users.current.email }}</div> </div> <div class="md-modal-nav"> <div ng-click="activeTab = 'settings'" ng-class="{ active: activeTab === 'settings' }" class="md-modal-nav-item"><i class="icon icon-cog"></i></div> <div ng-click="activeTab = 'avatar'" ng-class="{ active: activeTab === 'avatar' }" class="md-modal-nav-item"><i class="icon icon-emo-sunglasses"></i></div> <div ng-click="activeTab = 'password'" ng-class="{ active: activeTab === 'password' }" class="md-modal-nav-item"><i class="icon icon-lock-filled"></i></div> </div> <div class="md-modal-tab" ng-class="{ open: activeTab === 'settings' }"> <md-input-container> <label>{{ 'username' | translate }}</label> <input class="username" type="text" ng-model="users.accountSettings.username"> </md-input-container> <md-input-container> <label>{{ 'firstName' | translate }}</label> <input type="text" ng-model="users.accountSettings.first_name"> </md-input-container> <md-input-container> <label>{{ 'lastName' | translate }}</label> <input type="text" ng-model="users.accountSettings.last_name"> </md-input-container> <md-select placeholder="{{:: 'gender' | translate }}" ng-model="users.accountSettings.gender"> <md-option value="male" translate>{{:: 'male' | translate }}</md-option> <md-option value="female" translate>{{:: 'female' | translate }}</md-option> <md-option value="" translate>{{:: 'notSaying' | translate }}</md-option> </md-select> <div class="buttons"> <md-button ng-click="users.closeModal()">{{:: 'cancel' | translate }}</md-button> <md-button ng-click="users.updateAccountSettings()" class="md-raised md-primary">{{:: 'confirm' | translate }}</md-button> </div> </div> <div class="md-modal-tab" ng-class="{ open: activeTab === 'password' }"> <form ng-submit="users.changePassword()"> <md-input-container ng-if="users.current.password"> <label>{{ 'oldPassword' | translate }}</label> <input type="password" ng-model="users.changePasswordModel.oldPassword"> </md-input-container> <md-input-container> <label>{{ 'newPassword' | translate }}</label> <input type="password" ng-model="users.changePasswordModel.newPassword"> </md-input-container> <md-input-container> <label>{{ 'confirmPassword' | translate }}</label> <input type="password" ng-model="users.changePasswordModel.newPassword_confirmation"> </md-input-container> <div class="buttons"> <md-button ng-click="users.closeModal()">{{:: 'cancel' | translate }}</md-button> <md-button type="submit" class="md-raised md-primary">{{:: 'change' | translate }}</md-button> </div> </form> </div> <div class="md-modal-tab avatar-tab" ng-class="{ open: activeTab === 'avatar' }"> <img class="img-responsive" ng-src="{{ users.getAvatar() }}"/> <p>{{:: 'avatarAcceptedFormats' | translate }}</p> <p>{{:: 'avatarResizeExpl' | translate }}</p> <div class="buttons"> <md-button ng-click="users.closeModal()">{{:: 'cancel' | translate }}</md-button> <md-button ng-click="users.removeAvatar()">{{:: 'remove' | translate }}</md-button> <md-button ng-file-select ng-file-change="upload($files)" accept="image/*" ngf-accept="'.png,.jpg'" class="md-raised md-primary"> <i class="icon icon-upload-cloud"></i> {{:: 'upload' | translate }} </md-button> </div> </div> </md-dialog></script><md-dialog class="md-modal md-modal-wide chat-modal"><div class=md-modal-header><h1>Start new Conversation</h1><div ng-click=ctrl.parent.chat.closeModal() class=md-close-modal><i class="mdi mdi-close"></i></div></div><form ng-submit=ctrl.parent.createNewChat()><div class=errors><div class=error ng-repeat="error in ctrl.parent.errors">{{ error }}</div></div><md-select ng-model=ctrl.parent.chatModel.to_user placeholder="Select User"><md-option ng-value=user.id ng-repeat="user in ctrl.parent.users">{{ user.first_name }} {{ user.last_name }}</md-option></md-select><md-input-container><label for=subject>Subject</label> <input id=subject type=text ng-model=ctrl.parent.chatModel.subject></md-input-container><md-input-container><label for=message>Message</label> <input id=message type=textarea ng-model=ctrl.parent.chatModel.message></md-input-container><div class=buttons><md-button type=button ng-click=ctrl.parent.chat.closeModal()>{{:: 'cancel' | translate }}</md-button><md-button type=submit class="md-primary md-raised">Send</md-button></div></form></md-dialog><md-dialog class="md-modal md-modal-wide location-modal"><div class=md-modal-header><h1>Create a New location</h1><div ng-click=ctrl.parent.locations.closeModal() class=md-close-modal><i class="mdi mdi-close"></i></div></div><form ng-submit=ctrl.parent.createNewLocation()><div class=errors><div class=error ng-repeat="error in ctrl.parent.errors">{{ error }}</div></div><md-input-container><label for=name>Name</label> <input id=name type=input ng-model=ctrl.parent.locationModel.name></md-input-container><div class=buttons><md-button type=button ng-click=ctrl.parent.locations.closeModal()>{{:: 'cancel' | translate }}</md-button><md-button type=submit class="md-primary md-raised">{{:: 'create' | translate }}</md-button></div></form></md-dialog><md-dialog class="md-modal md-modal-wide role-modal"><div class=md-modal-header><h1>Create a New Role</h1><div ng-click=ctrl.parent.roles.closeModal() class=md-close-modal><i class="mdi mdi-close"></i></div></div><form ng-submit=ctrl.parent.createNewRole()><div class=errors><div class=error ng-repeat="error in ctrl.parent.errors">{{ error }}</div></div><md-input-container><label for=name>Name</label> <input id=name type=input ng-model=ctrl.parent.roleModel.name></md-input-container><md-checkbox ng-model="ctrl.parent.roleModel.permissions['admin']" aria-label="Folder Permission">Admin Dashboard</md-checkbox><md-checkbox ng-model="ctrl.parent.roleModel.permissions['users']" aria-label="Folder Permission">View Users</md-checkbox><md-checkbox ng-model="ctrl.parent.roleModel.permissions['roles']" aria-label="Folder Permission">Role Permission</md-checkbox><md-checkbox ng-model="ctrl.parent.roleModel.permissions['files']" aria-label="Folder Permission">Files Permission</md-checkbox><md-checkbox ng-model="ctrl.parent.roleModel.permissions['folders']" aria-label="Folder Permission">Folder Permission</md-checkbox><md-checkbox ng-model="ctrl.parent.roleModel.permissions['settings']" aria-label="Folder Permission">Settings Permission</md-checkbox><md-checkbox ng-model="ctrl.parent.roleModel.permissions['upload']" aria-label="Upload Permission">Upload Permission</md-checkbox><div class=buttons><md-button type=button ng-click=ctrl.parent.roles.closeModal()>{{:: 'cancel' | translate }}</md-button><md-button type=submit class="md-primary md-raised">{{:: 'create' | translate }}</md-button></div></form></md-dialog><md-dialog class="md-modal md-modal-wide user-modal"><div class=md-modal-header><h1>{{:: 'createNewUser' | translate }}</h1><div ng-click=ctrl.parent.users.closeModal() class=md-close-modal><i class="mdi mdi-close"></i></div></div><form ng-submit=ctrl.parent.createNewUser()><div class=errors><div class=error ng-repeat="error in ctrl.parent.errors">{{ error }}</div></div><md-input-container><label for=email>{{:: 'email' | translate }}</label> <input id=email type=email ng-model=ctrl.parent.userModel.email></md-input-container><div layout layout-sm=column><md-input-container flex><label for=password>{{:: 'password' | translate }}</label> <input id=password type=password ng-model=ctrl.parent.userModel.password></md-input-container><md-input-container flex><label for=repeatPassword>{{:: 'repeatPassword' | translate }}</label> <input id=repeatPassword type=password ng-model=ctrl.parent.userModel.password_confirmation></md-input-container></div><md-input-container><label for=username>{{:: 'username' | translate }}</label> <input id=username type=text ng-model=ctrl.parent.userModel.username></md-input-container><div layout layout-sm=column><md-input-container flex><label for=first_name>{{:: 'firstName' | translate }}</label> <input id=first_name type=text ng-model=ctrl.parent.userModel.first_name></md-input-container><md-input-container flex><label for=last_name>{{:: 'lastName' | translate }}</label> <input id=last_name type=text ng-model=ctrl.parent.userModel.last_name></md-input-container></div><div ng-if="ctrl.parent.users.current.roles.id == 2"><md-select ng-model=ctrl.parent.userModel.role placeholder=Role><md-option ng-value=3>Store Manager</md-option></md-select></div><div ng-if="ctrl.parent.users.current.roles.id != 2"><md-select ng-model=ctrl.parent.userModel.role placeholder=Role><md-option ng-value=role.id ng-repeat="role in ctrl.parent.roles">{{ role.name }}</md-option></md-select></div><label ng-repeat="location in ctrl.parent.locations"><input type=checkbox name={{location.name}} id={{location.id}} ng-model=location.checked ng-change=ctrl.parent.selectedLocations()> <label for={{location.name}}>{{location.name}}</label></label><div class=buttons><md-button type=button ng-click=ctrl.parent.users.closeModal()>{{:: 'cancel' | translate }}</md-button><md-button type=submit class="md-primary md-raised">{{:: 'create' | translate }}</md-button></div></form></md-dialog><md-dialog class="md-modal md-modal-wide user-modal"><div class=md-modal-header><h1>{{:: 'createNewUser' | translate }}</h1><div ng-click=users.closeModal() class=md-close-modal><i class="mdi mdi-close"></i></div></div><form ng-submit=submit()><div class=errors></div><md-input-container><label for=email>{{:: 'email' | translate }}</label> <input id=email type=email ng-model=userModel.email></md-input-container><div layout layout-sm=column><md-input-container flex><label for=password>{{:: 'password' | translate }}</label> <input id=password type=password ng-model=userModel.password></md-input-container><md-input-container flex><label for=repeatPassword>{{:: 'repeatPassword' | translate }}</label> <input id=repeatPassword type=password ng-model=userModel.password_confirmation></md-input-container></div><md-input-container><label for=username>{{:: 'username' | translate }}</label> <input id=username type=text ng-model=userModel.username></md-input-container><div layout layout-sm=column><md-input-container flex><label for=first_name>{{:: 'firstName' | translate }}</label> <input id=first_name type=text ng-model=userModel.first_name></md-input-container><md-input-container flex><label for=last_name>{{:: 'lastName' | translate }}</label> <input id=last_name type=text ng-model=userModel.last_name></md-input-container></div><md-select placeholder=Gender ng-model=userModel.gender><md-option value=male translate>male</md-option><md-option value=female translate>female</md-option></md-select><div class=buttons><md-button type=button ng-click=users.closeModal()>{{:: 'cancel' | translate }}</md-button><md-button type=submit class="md-primary md-raised" translate>{{ type }}</md-button></div></form></md-dialog><script type=text/ng-template id=assets/views/modals/filesPermission.html><md-dialog class="md-modal md-modal-wide rename-photo-modal"> <div class="md-modal-header"> <h1>Assign File Permission</h1> <div ng-click="files.closeModal()" class="md-close-modal"><i class="mdi mdi-close"></i></div> </div> <form ng-submit="files.assignUsers(files.id)"> <label ng-repeat="user in files.users"> <input type="checkbox" name="users[]" ng-value="{{user.id}}" ng-model="files.fileNameModel[user.id]" ng-true-value="{{user.id}}" > {{user.first_name}} {{user.last_name}} (<label ng-repeat="location in user.locations"> {{location.name}}{{$last ? '' : ','}} </label>) </label> <div class="buttons"> <md-button type="button" ng-click="files.closeModal()">{{:: 'cancel' | translate }}</md-button> <md-button type="submit" class="md-raised md-primary">Submit</md-button> </div> </form> </md-dialog></script><script type=text/ng-template id=assets/views/modals/fpermission.html><md-dialog class="md-modal md-modal-wide rename-photo-modal"> <div class="md-modal-header"> <h1>Assign File Permission</h1> <div ng-click="files.closeModal()" class="md-close-modal"><i class="mdi mdi-close"></i></div> </div> </md-dialog></script><script type=text/ng-template id=assets/views/modals/links.html><md-dialog class="md-modal links-modal"> <div class="md-modal-header"> <h1>{{:: 'links' | translate }}</h1> <div ng-click="close()" class="md-close-modal"><i class="icon icon-cancel"></i></div> </div> <ed-shareable-links ed-generate-nav="shareable.folder_id"></ed-shareable-links> </md-dialog></script><script type=text/ng-template id=assets/views/modals/move.html><md-dialog class="md-modal move-photo-modal"> <div class="md-modal-header"> <h1>{{:: 'moveTo' | translate }}</h1> <div ng-click="files.closeModal()" class="md-close-modal"><i class="mdi mdi-close"></i></div> </div> <md-select placeholder="Select a Folder" ng-model="selectedFolder"> <md-option ng-repeat="folder in folders.available" ng-if="selectedItems.first('type') === 'file' && folder.id != selectedItems.first('folder_id')" value="{{ folder.id }}">{{ folder.name }}</md-option> <md-option ng-repeat="folder in folders.available" ng-if="selectedItems.first('type') === 'folder' && folder.id != selectedItems.first('id')" value="{{ folder.id }}">{{ folder.name }}</md-option> </md-select> <div class="buttons"> <md-button ng-click="files.closeModal()">{{:: 'cancel' | translate }}</md-button> <md-button ng-click="move(selectedFolder)" class="md-raised md-primary">{{:: 'move' | translate }}</md-button> </div> </md-dialog></script><script type=text/ng-template id=assets/views/modals/permission.html><md-dialog class="md-modal md-modal-wide rename-photo-modal"> <div class="md-modal-header"> <h1>Assign Folder Permission</h1> <div ng-click="folders.closeModal()" class="md-close-modal"><i class="mdi mdi-close"></i></div> </div> <form ng-submit="folders.assignUsers(folders.id)"> <label ng-repeat="user in folders.users"> <input type="checkbox" name="users[]" ng-value="{{user.id}}" ng-model="folders.folderNameModel[user.id]" ng-true-value="{{user.id}}" > {{user.first_name}} {{user.last_name}} (<label ng-repeat="location in user.locations"> {{location.name}}{{$last ? '' : ','}} </label>) </label> <div class="buttons"> <md-button type="button" ng-click="folders.closeModal()">{{:: 'cancel' | translate }}</md-button> <md-button type="submit" class="md-raised md-primary">Submit</md-button> </div> </form> </md-dialog></script><script type=text/ng-template id=assets/views/modals/renamePhoto.html><md-dialog class="md-modal md-modal-wide rename-photo-modal"> <div class="md-modal-header"> <h1>{{:: 'rename' | translate }}</h1> <div ng-click="files.closeModal()" class="md-close-modal"><i class="mdi mdi-close"></i></div> </div> <form ng-submit="files.rename(selectedItems.first('id'))"> <md-input-container> <label for="photo-name">{{:: 'name' | translate }}</label> <input id="photo-name" type="text" ng-model="files.fileNameModel" required> <div class="md-modal-error"></div> </md-input-container> <div class="buttons"> <md-button type="button" ng-click="files.closeModal()">{{:: 'cancel' | translate }}</md-button> <md-button type="submit" ng-disabled="!files.fileNameModel" class="md-raised md-primary">{{:: 'rename' | translate }}</md-button> </div> </form> </md-dialog></script><md-dialog class="md-modal md-modal-wide chat-modal"><div class=md-modal-header><h1>{{ctrl.parent.chatModel.subject}}</h1><div ng-click=chat.closeModal() class=md-close-modal><i class="mdi mdi-close"></i></div></div><form ng-submit=ctrl.parent.updateChat()><div class=errors><div class=error ng-repeat="error in errors">{{ error }}</div></div><div ng-repeat="message in ctrl.parent.chatModel.messages">{{message.username}} : {{message.message}}</div><md-input-container><label for=message>Message</label> <input id=message type=text ng-model=ctrl.parent.chatModel.message></md-input-container><div class=buttons><md-button type=button ng-click=ctrl.parent.chat.closeModal()>{{:: 'cancel' | translate }}</md-button><md-button type=submit class="md-primary md-raised">Reply</md-button></div></form></md-dialog><md-dialog class="md-modal md-modal-wide locations-modal"><div class=md-modal-header><h1>Update Location</h1><div ng-click=locations.closeModal() class=md-close-modal><i class="mdi mdi-close"></i></div></div><form ng-submit=ctrl.parent.updateLocations()><div class=errors><div class=error ng-repeat="error in errors">{{ error }}</div></div><md-input-container><label for=email>Name</label> <input id=name type=name ng-model=ctrl.parent.locationModel.name></md-input-container><div class=buttons><md-button type=button ng-click=ctrl.parent.locations.closeModal()>{{:: 'cancel' | translate }}</md-button><md-button type=submit class="md-primary md-raised">{{:: 'update' | translate }}</md-button></div></form></md-dialog><md-dialog class="md-modal md-modal-wide role-modal"><div class=md-modal-header><h1>Update Role</h1><div ng-click=roles.closeModal() class=md-close-modal><i class="mdi mdi-close"></i></div></div><form ng-submit=ctrl.parent.updateRole()><div class=errors><div class=error ng-repeat="error in errors">{{ error }}</div></div><md-input-container><label for=email>Name</label> <input id=name type=name ng-model=ctrl.parent.roleModel.name></md-input-container><md-checkbox ng-model="ctrl.parent.roleModel.permissions['admin']" aria-label="Folder Permission">Admin Dashboard</md-checkbox><md-checkbox ng-model="ctrl.parent.roleModel.permissions['users']" aria-label="Folder Permission">View Users</md-checkbox><md-checkbox ng-model="ctrl.parent.roleModel.permissions['roles']" aria-label="Folder Permission">Role Permission</md-checkbox><md-checkbox ng-model="ctrl.parent.roleModel.permissions['files']" aria-label="Folder Permission">Files Permission</md-checkbox><md-checkbox ng-model="ctrl.parent.roleModel.permissions['folders']" aria-label="Folder Permission">Folder Permission</md-checkbox><md-checkbox ng-model="ctrl.parent.roleModel.permissions['settings']" aria-label="Folder Permission">Settings Permission</md-checkbox><md-checkbox ng-model="ctrl.parent.roleModel.permissions['upload']" aria-label="Upload Permission">Upload Permission</md-checkbox><div class=buttons><md-button type=button ng-click=ctrl.parent.roles.closeModal()>{{:: 'cancel' | translate }}</md-button><md-button type=submit class="md-primary md-raised">{{:: 'update' | translate }}</md-button></div></form></md-dialog><md-dialog class="md-modal md-modal-wide user-modal"><div class=md-modal-header><h1>{{:: 'updateUser' | translate }}</h1><div ng-click=users.closeModal() class=md-close-modal><i class="mdi mdi-close"></i></div></div><form ng-submit=ctrl.parent.updateUser()><div class=errors><div class=error ng-repeat="error in errors">{{ error }}</div></div><md-input-container><label for=email>{{:: 'email' | translate }}</label> <input id=email type=email ng-model=ctrl.parent.userModel.email></md-input-container><div layout layout-sm=column><md-input-container flex><label for=password>{{:: 'password' | translate }}</label> <input id=password type=password ng-model=ctrl.parent.userModel.password></md-input-container><md-input-container flex><label for=repeatPassword>{{:: 'repeatPassword' | translate }}</label> <input id=repeatPassword type=password ng-model=ctrl.parent.userModel.password_confirmation></md-input-container></div><md-input-container><label for=username>{{:: 'username' | translate }}</label> <input id=username type=text ng-model=ctrl.parent.userModel.username></md-input-container><div layout layout-sm=column><md-input-container flex><label for=first_name>{{:: 'firstName' | translate }}</label> <input id=first_name type=text ng-model=ctrl.parent.userModel.first_name></md-input-container><md-input-container flex><label for=last_name>{{:: 'lastName' | translate }}</label> <input id=last_name type=text ng-model=ctrl.parent.userModel.last_name></md-input-container></div><div ng-if="ctrl.parent.users.current.roles.id == 2"><md-select ng-model=ctrl.parent.userModel.role placeholder=Role><md-option ng-value=3>Store Manager</md-option></md-select></div><div ng-if="ctrl.parent.users.current.roles.id != 2"><md-select ng-model=ctrl.parent.userModel.role placeholder=Role><md-option ng-value=role.id ng-repeat="role in ctrl.parent.roles">{{ role.name }}</md-option></md-select></div><label ng-repeat="location in ctrl.parent.locations"><input type=checkbox name={{location.name}} id={{location.id}} ng-model=location.checked ng-change=ctrl.parent.selectedLocations()> <label for={{location.name}}>{{location.name}}</label></label><div class=buttons><md-button type=button ng-click=ctrl.parent.users.closeModal()>{{:: 'cancel' | translate }}</md-button><md-button type=submit class="md-primary md-raised">{{:: 'update' | translate }}</md-button></div></form></md-dialog>